<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Quoters</title>

    <link rel="icon" type="image/png" href="./img/icons/favicon.png" />

    <meta name="theme-color" content="#2A3443" />
    <meta name="description" content="Tutorial app." />

    <link
      rel="stylesheet"
      type="text/css"
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"
    />

    <!-- iOS -->
    <link rel="apple-touch-icon" href="./img/icons/icon-144x144.png" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-status-bar-style" content="black" />
    <meta name="mobile-web-app-title" content="TutorialApp" />

    <script>
      if (!window.customElements) {
        document.write("<!--");
      }
    </script>
    <script src="./vendor/custom-elements-es5-adapter.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <!-- ! DO NOT REMOVE THIS COMMENT, WE NEED ITS CLOSING MARKER -->
  </head>

  <body>
    <style>
      @import url('https://fonts.googleapis.com/css?family=Handlee');
      @import url('https://fonts.googleapis.com/css?family=Montserrat');
      @import url('https://fonts.googleapis.com/css?family=Courgette');
    </style>
    <menu-wrapper-view></menu-wrapper-view>
    <main></main>
    <script src="./vendor/webcomponents-loader.js"></script>

    <script>
      let acl = null;

      function doShakyShaky() {
        let shaking = false;

        function onreading() {
          const shakeTreashold = 3 * 9.8;
          const stillTreashold = 1;
          let magnitude = Math.hypot(acl.x, acl.y, acl.z);
          if (magnitude > shakeTreashold) {
            const currentPathName = window.location.pathname;
            if (currentPathName === "/" || currentPathName.includes("quotes")) {
              document.getElementById("addQuote").click();
            }

            if (currentPathName.includes("boards")) {
              document.getElementById("addBoard").click();
            }
            shaking = true;
          } else if (magnitude < stillTreashold && shaking) {
            shaking = false;
          }
        }

        acl.addEventListener("reading", onreading);
      }

      function startShakyShaky() {
        acl = new LinearAccelerationSensor({ frequency: 60 });
        acl.addEventListener("activate", doShakyShaky);
        acl.addEventListener("error", error => {
          // alert('no shaky shaky for you')
        });
        acl.start();
      }

      window.addEventListener("load", startShakyShaky);
    </script>
  </body>
</html>
